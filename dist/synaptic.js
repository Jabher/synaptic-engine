var synaptic=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ConvNet=e.LSTM=e.FeedForward=e.Network=e.Engine=void 0;var i=n(1),o=r(i),a=n(2),c=r(a),u=n(3),s=r(u),f=n(4),l=r(f);e.Engine=o["default"],e.Network=c["default"],e.FeedForward=s["default"],e.LSTM=l["default"],e.ConvNet=l["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return 1/(1+Math.exp(-t))}function i(t){var e=r(t);return e*(1-e)}function o(t,e){return t.reduce(function(t,n){return t+e(n)},0)}function a(){return 2*Math.random()-1}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.LOGISTIC_SIGMOID=r,e.LOGISTIC_SIGMOID_DERIVATIVE=i;var u=function(){function t(){n(this,t),this.state={},this.weight={},this.gain={},this.activation={},this.elegibilityTrace={},this.extendedElegibilityTrace={},this.errorResponsibility={},this.projectedErrorResponsibility={},this.gatedErrorResponsibility={},this.activationFunction={},this.activationFunctionDerivative={},this.inputSet={},this.projectionSet={},this.gateSet={},this.connections=[],this.gates=[],this.learningRate=.1,this.size=0}return c(t,[{key:"activate",value:function(t,e){var n=t,r=this.state,i=this.weight,a=this.gain,c=this.activation,u=this.activationFunction,s=this.activationFunctionDerivative,f=this.elegibilityTrace,l=this.extendedElegibilityTrace,h=this.inputSet;if("undefined"!=typeof e)c[n]=e;else{r[n]=a[n][n]*i[n][n]*r[n]+o(h[n],function(t){return a[n][t]*i[n][t]*c[t]}),c[n]=u[n](r[n]);for(var y in f[n]){f[n][y]=a[n][n]*i[n][n]*f[n][y]+a[n][y]*c[y];for(var p in l[n][y])l[n][y][p]=a[p][p]*i[p][p]*l[n][y][p]+s[n](r[n])*f[n][y]*this.bigParenthesisTerm(n,+p)}this.gates.filter(function(e){return e.gater===t}).forEach(function(e){a[e.to][e.from]=c[t]})}return c[n]}},{key:"propagate",value:function(t,e){var n=this,r=t,i=this.state,a=this.weight,c=this.gain,u=this.activation,s=this.activationFunctionDerivative,f=this.errorResponsibility,l=this.projectedErrorResponsibility,h=this.gatedErrorResponsibility,y=this.learningRate,p=this.elegibilityTrace,d=this.extendedElegibilityTrace,g=this.projectionSet,v=this.gateSet,b=this.inputSet;"undefined"!=typeof e?f[r]=l[r]=e-u[r]:(l[r]=s[r](i[r])*o(g[r],function(t){return f[t]*c[t][r]*a[t][r]}),h[r]=s[r](i[r])*o(v[r],function(t){return f[t]*n.bigParenthesisTerm(r,t)}),f[r]=l[r]+h[r]),b[r].forEach(function(t){a[r][t]+=y*l[r]*p[r][t]+y*o(v[r],function(e){return f[e]*d[r][t][e]})})}},{key:"bigParenthesisTerm",value:function(t,e){var n=this.weight,r=this.state,i=this.activation,a=this.gates.filter(function(n){return n.to===e&&n.gater===t}).filter(function(t){return t.from!==t.to}).map(function(t){return t.from}),c=this.gates.some(function(n){return n.from===e&&n.to===e&&n.gater===t})?1:0;return c*n[e][e]*r[e]+o(a,function(t){return n[e][t]*i[t]})}},{key:"addUnit",value:function(){var t=this.size;return this.state[t]=a(),this.weight[t]={},this.gain[t]={},this.elegibilityTrace[t]={},this.extendedElegibilityTrace[t]={},this.activation[t]=0,this.weight[t][t]=0,this.gain[t][t]=1,this.elegibilityTrace[t][t]=0,this.extendedElegibilityTrace[t][t]={},this.activationFunction[t]=r,this.activationFunctionDerivative[t]=i,this.errorResponsibility[t]=0,this.projectedErrorResponsibility[t]=0,this.gatedErrorResponsibility[t]=0,this.inputSet[t]=[],this.projectionSet[t]=[],this.gateSet[t]=[],this.size++,t}},{key:"addConnection",value:function(t,e){var n=this;if(!this.connections.some(function(n){return n.from===t&&n.to===e})){this.connections.push({from:t,to:e});var r=e,i=t,o=t===e;this.gain[r][i]=1,this.weight[r][i]=o?1:a(),this.elegibilityTrace[r][i]=0,this.extendedElegibilityTrace[r][i]={},this.connections.filter(function(t){return t.to===e}).filter(function(t){return t.from!==t.to}).map(function(t){return t.from}).forEach(function(t){n.inputSet[e].includes(t)||n.inputSet[e].push(t)}),this.connections.filter(function(e){return e.from===t}).map(function(t){return t.to}).filter(function(e){return e>t}).forEach(function(e){n.projectionSet[t].includes(e)||n.projectionSet[t].push(e)}),this.gates.filter(function(t){return t.gater===r}).map(function(t){return t.to}).forEach(function(t){n.inputSet[r].forEach(function(e){n.extendedElegibilityTrace[r][e][t]=0})})}}},{key:"addGate",value:function(t,e,n){var r=this;if(!this.gates.some(function(n){return n.from===t&&n.to===e})){this.gates.push({from:t,to:e,gater:n});var i=n,o=e;for(var a in this.elegibilityTrace[i])this.extendedElegibilityTrace[i][a][o]=0;this.gates.filter(function(t){return t.gater===n}).map(function(t){return t.to}).filter(function(t){return t>n}).forEach(function(t){r.gateSet[n].includes(t)||r.gateSet[n].push(t)})}}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){return e.map(function(n,r){var i=e.slice(0,r).reduce(function(t,e){return t*e},1);return t/i%n|0})}function s(t,e,n,r){for(var i=n;i>=0;i--)if(i in t&&i in e){var o=t[i],a=e[i];if(o<a-r||o>a+r)return!1}return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.gateTypes=e.connectionTypes=void 0;var f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=function v(t,e,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:v(i,e,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},h=n(1),y=r(h),p=e.connectionTypes={DENSE:function(){return function(t,e){return!0}},SELF:function(){return function(t,e){return t===e}},CONVOLUTION:function(t,e,n){return function(r,i){var o=u(r,t),a=u(i,e),c=Math.max(t.length,dimensionB.length);return s(o,a,c,n)}}},d=e.gateTypes={INBOUND:"The gater layer will gate all the inbound connections coming into the gated layer",OUTBOUND:"The gater layer will gate all the outbound connections coming from the gated layer",SELF:"The gater layer will gate all the self-connections of the gated layer"},g=function(t){function e(){o(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.layers=[],t}return c(e,t),f(e,[{key:"activate",value:function(){for(var t=this,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=[];return this.layers.forEach(function(n,o){0===o?n.forEach(function(n,i){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"activate",t).call(t,n,r[i])}):o<t.layers.length-1?n.forEach(function(n){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"activate",t).call(t,n)}):a=n.reduce(function(n,r){return[].concat(i(n),[l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"activate",t).call(t,r)])},[])}),a}},{key:"propagate",value:function(){for(var t=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];this.layers.slice(1).reverse().forEach(function(n,i){var o=0===i;n.concat().reverse().forEach(function(n,i){o?l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"propagate",t).call(t,n,r[i]):l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"propagate",t).call(t,n)})})}},{key:"addLayer",value:function(t){for(var e=[],n=0;n<t;n++){var r=this.addUnit();e.push(r)}return this.layers.push(e),e}},{key:"connectLayers",value:function(t,e,n){var r=this;"undefined"==typeof n&&(n=t!==e?p.DENSE():p.SELF()),t.forEach(function(t,i){e.forEach(function(e,o){n(i,o)&&r.addConnection(t,e)})})}},{key:"gateLayer",value:function(t,e,n){var r=this;if(t.length!==e.length)throw new Error("Gater and Gated layers must be the same length.");for(var i=void 0,o=void 0,a=void 0,c=function(c){switch(n){case d.SELF:i=e[c],o=e[c],a=t[c],r.addGate(i,o,a);break;case d.INBOUND:o=e[c],a=t[c],r.connections.filter(function(t){return t.to===o}).filter(function(t){return t.from!==o}).map(function(t){return t.from}).forEach(function(t){return r.addGate(t,o,a)});break;case d.OUTBOUND:e.forEach(function(n){i=e[c],a=t[c],r.connections.filter(function(t){return t.from===i}).filter(function(t){return t.to!==i}).map(function(t){return t.to}).forEach(function(t){return r.addGate(i,t,a)})})}},u=0;u<t.length;u++)c(u)}},{key:"toJSON",value:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0],e={layers:this.layers,state:this.state,weight:this.weight,gain:this.gain,activation:this.activation,elegibilityTrace:this.elegibilityTrace,extendedElegibilityTrace:this.extendedElegibilityTrace,errorResponsibility:this.errorResponsibility,projectedErrorResponsibility:this.projectedErrorResponsibility,gatedErrorResponsibility:this.gatedErrorResponsibility,connections:this.connections,gates:this.gates,size:this.size};return t?JSON.stringify(e):e}},{key:"clone",value:function(){return e.fromJSON(this.toJSON())}}],[{key:"fromJSON",value:function(t){for(var n="string"==typeof t?JSON.parse(t):t,r=new e,i=0;i<n.size;i++)r.addUnit();return n.connections.forEach(function(t){return r.addConnection(t.from,t.to)}),n.gates.forEach(function(t){return r.addGate(t.from,t.to,t.gater)}),r.layers=n.layers,r.state=n.state,r.weight=n.weight,r.gain=n.gain,r.activation=n.activation,r.elegibilityTrace=n.elegibilityTrace,r.extendedElegibilityTrace=n.extendedElegibilityTrace,r.errorResponsibility=n.errorResponsibility,r.projectedErrorResponsibility=n.projectedErrorResponsibility,r.gatedErrorResponsibility=n.gatedErrorResponsibility,r.connections=n.connections,r.gates=n.gates,r}}]),e}(y["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(2),u=r(c),s=function(t){function e(t,n,r){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.inputLayer=a.addLayer(t),a.hiddenLayer=a.addLayer(n),a.outputLayer=a.addLayer(r),a.connectLayers(a.inputLayer,a.hiddenLayer),a.connectLayers(a.hiddenLayer,a.outputLayer),a}return a(e,t),e}(u["default"]);e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(2),u=r(c),s=c.gateTypes.INBOUND,f=c.gateTypes.OUTBOUND,l=c.gateTypes.SELF,h=function(t){function e(t,n,r){i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.inputLayer=a.addLayer(t),a.inputGate=a.addLayer(n),a.forgetGate=a.addLayer(n),a.memoryCell=a.addLayer(n),a.outputGate=a.addLayer(n),a.outputLayer=a.addLayer(r),a.connectLayers(a.inputLayer,a.memoryCell),a.connectLayers(a.memoryCell,a.memoryCell),a.connectLayers(a.memoryCell,a.outputLayer),a.connectLayers(a.inputLayer,a.inputGate),a.connectLayers(a.inputLayer,a.forgetGate),a.connectLayers(a.inputLayer,a.outputGate),a.connectLayers(a.inputLayer,a.outputLayer),a.gateLayer(a.inputGate,a.memoryCell,s),a.gateLayer(a.forgetGate,a.memoryCell,l),a.gateLayer(a.outputGate,a.memoryCell,f),a.connectLayers(a.memoryCell,a.inputGate),a.connectLayers(a.memoryCell,a.forgetGate),a.connectLayers(a.memoryCell,a.outputGate),a}return a(e,t),e}(u["default"]);e["default"]=h}]);